<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="1400" height="900" viewBox="0 0 1400 900" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: 700 28px/1.2 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #f5f5f5; }
      .subtitle { font: 600 20px/1.2 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #dcdcdc; }
      .label { font: 500 16px/1.2 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #f0f0f0; }
      .small { font: 400 14px/1.4 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; fill: #cfcfcf; }
      .box { fill: #111418; stroke: #3a3f45; stroke-width: 1.4; rx: 16; }
      .grp { fill: #0b0f14; stroke: #2a2f36; stroke-width: 1.2; rx: 18; }
      .accent { fill: #0f2b1d; stroke: #1f7a4a; }
      .arrow { stroke: #e5e7eb; stroke-width: 1.4; marker-end: url(#arrowhead); fill: none; }
      .dash { stroke-dasharray: 6 6; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#e5e7eb"/>
    </marker>
    <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="0" dy="2" stdDeviation="4" flood-color="#000" flood-opacity="0.6"/>
    </filter>
  </defs>

  <rect x="0" y="0" width="1400" height="900" fill="#0a0d12"/>
  <text x="40" y="56" class="title">EdenCore · Arquitectura & Flujo</text>
  <text x="40" y="86" class="small">Vista de alto nivel del frontend, autenticación, backend (PostgreSQL/Supabase), almacenamiento y capa de IA (Eva Skema).</text>

  <g transform="translate(40,130)">
    <rect class="grp" width="260" height="170" filter="url(#softShadow)"/>
    <text x="20" y="38" class="subtitle">Usuarios</text>
    <text x="20" y="70" class="small">• Super Admin</text>
    <text x="20" y="92" class="small">• PM / AM</text>
    <text x="20" y="114" class="small">• IT / NOC / Campo</text>
    <text x="20" y="136" class="small">• Cliente</text>
  </g>

  <g transform="translate(360,120)">
    <rect class="box" width="380" height="210" filter="url(#softShadow)"/>
    <text x="20" y="40" class="subtitle">Frontend (React + TS + Vite)</text>
    <text x="20" y="74" class="small">Tailwind · i18next · react-router-dom · Lucide</text>
    <text x="20" y="102" class="small">Layout responsive notch-safe</text>
    <text x="20" y="128" class="small">Módulos: Dashboard, Levantamientos, BoM, Tickets</text>
    <text x="20" y="154" class="small">Panel Eva Skema (asistencia contextual)</text>
  </g>

  <g transform="translate(800,120)">
    <rect class="box" width="260" height="210" filter="url(#softShadow)"/>
    <text x="20" y="40" class="subtitle">Supabase Auth</text>
    <text x="20" y="74" class="small">Email/Password · Google</text>
    <text x="20" y="102" class="small">Post-login: sync → public.usuarios</text>
    <text x="20" y="128" class="small">logs_acceso (IP, navegador, éxito)</text>
    <text x="20" y="154" class="small">Permisos por rol / módulo</text>
  </g>

  <g transform="translate(1090,140)">
    <rect class="accent box" width="260" height="170" filter="url(#softShadow)"/>
    <text x="20" y="40" class="subtitle">Edge Function / RPC</text>
    <text x="20" y="74" class="small">sync_user_profile()</text>
    <text x="20" y="100" class="small">• upsert usuarios</text>
    <text x="20" y="122" class="small">• insert logs_acceso</text>
  </g>

  <g transform="translate(360,380)">
    <rect class="grp" width="990" height="410" filter="url(#softShadow)"/>
    <text x="20" y="40" class="subtitle">Backend · PostgreSQL (Supabase)</text>
    <text x="20" y="68" class="small">Esquema Génesis v8 · Integridad referencial · Storage</text>

    <g transform="translate(20,90)">
      <rect class="box" width="300" height="130" filter="url(#softShadow)"/>
      <text x="16" y="36" class="label">Catálogos</text>
      <text x="16" y="62" class="small">roles, departamentos, cadenas, sitios, células</text>
      <text x="16" y="86" class="small">usuarios, organigrama, directorio</text>
    </g>
    <g transform="translate(340,90)">
      <rect class="box" width="300" height="130" filter="url(#softShadow)"/>
      <text x="16" y="36" class="label">Proyectos & Operación</text>
      <text x="16" y="62" class="small">proyectos, asignaciones, levantamientos</text>
      <text x="16" y="86" class="small">tickets, notificaciones</text>
    </g>
    <g transform="translate(660,90)">
      <rect class="box" width="300" height="130" filter="url(#softShadow)"/>
      <text x="16" y="36" class="label">BoM & Costos</text>
      <text x="16" y="62" class="small">equipos, bom, cotizaciones</text>
      <text x="16" y="86" class="small">reglas_normativas</text>
    </g>

    <g transform="translate(20,240)">
      <rect class="box" width="300" height="130" filter="url(#softShadow)"/>
      <text x="16" y="36" class="label">Evidencias de campo</text>
      <text x="16" y="62" class="small">fotos_levantamiento (GPS)</text>
      <text x="16" y="86" class="small">speedtests (AP/ONT)</text>
    </g>
    <g transform="translate(340,240)">
      <rect class="box" width="300" height="130" filter="url(#softShadow)"/>
      <text x="16" y="36" class="label">Documentos & Firmas</text>
      <text x="16" y="62" class="small">document_versions</text>
      <text x="16" y="86" class="small">contratos, firmas_digitales</text>
    </g>
    <g transform="translate(660,240)">
      <rect class="box" width="300" height="130" filter="url(#softShadow)"/>
      <text x="16" y="36" class="label">IA · Eva Skema</text>
      <text x="16" y="62" class="small">eva_nucleo, eva_modulos_activos</text>
      <text x="16" y="86" class="small">eva_aprendizaje, eva_interacciones_ui</text>
    </g>
  </g>

  <line x1="300" y1="215" x2="360" y2="215" class="arrow"/>
  <line x1="740" y1="215" x2="800" y2="215" class="arrow"/>
  <line x1="1060" y1="215" x2="1090" y2="215" class="arrow"/>

  <path d="M550 330 L550 380" class="arrow"/>
  <text x="560" y="360" class="small">REST / Realtime</text>

  <path d="M930 330 L930 380" class="arrow"/>
  <text x="940" y="360" class="small">sync usuarios / logs</text>

  <g transform="translate(1130,550)">
    <rect class="box" width="180" height="90" filter="url(#softShadow)"/>
    <text x="16" y="40" class="label">Storage</text>
    <text x="16" y="66" class="small">fotos, PDFs</text>
  </g>
  <line x1="1080" y1="585" x2="1130" y2="595" class="arrow dash"/>

  <text x="40" y="870" class="small">© EdenCore — Diagrama de arquitectura (v1 · dark)</text>
</svg>
